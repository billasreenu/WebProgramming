<!DOCTYPE html>
<html>

<head>
    <title>JavaScript - Form Validation</title>
    <style>
        .invalid {
            border-color: red;
        }
        
        #error {
            color: red
        }
    </style>

    <script>
        function validateTextField() {

            let fValue = document.getElementById("name1").value;
            let myRegEx = /^[a-zA-Z0-9]+$/;

            if (fValue === "")
                document.getElementById("errUN").innerHTML = "Enter username";
            else if (fValue.length < 5)
                document.getElementById("errUN").innerHTML = "Should have min 5 chars";
            else if (fValue.length > 32)
                document.getElementById("errUN").innerHTML = "Allowed max 32 chars";
            else if (!myRegEx.test(fValue))
                document.getElementById("errUN").innerHTML = "Not a valid name";
            else {
                console.log("Good");
                document.getElementById("errUN").innerHTML = "";
                return true;
            }

            return false;

        }


        function validatePasswordField() {

            let fValue = document.getElementById("password1").value;
            let myRegEx = /^[a-zA-Z0-9]+$/;

            if (fValue === "")
                document.getElementById("errPW").innerHTML = "Enter password";
            else if (fValue.length < 8)
                document.getElementById("errPW").innerHTML = "Should have min 8 chars";
            else if (fValue.length > 50)
                document.getElementById("errPW").innerHTML = "Allowed max 50 chars";
            else if (!myRegEx.test(fValue))
                document.getElementById("errPW").innerHTML = "Not a valid password";
            else {
                console.log("Good");
                document.getElementById("errPW").innerHTML = "";
                return true;
            }
            return false;
        }

        function validateFormOnSubmit(form) {
            let val1 = validateTextField();
            let va22 = validatePasswordField();
            if (!val1 || !va22)
                return false;
            else
                return true;

        }
    </script>
</head>

<body>
    <h1> Form Validation </h1>
    <form name="form1" method="" action="" onsubmit="return validateFormOnSubmit(this)">
        Username - onkeyup <br />
        <input type="text" name="name1" id="name1" onkeyup="validateTextField()" /><br />
        <label id="errUN" style="color:red"></label><br /> Password - oninput<br />
        <input type="password" name="password1" id="password1" oninput="validatePasswordField()" /><br />
        <label id="errPW" style="color:red"></label><br />

        <input type="submit" />
    </form>

</body>
<script>
    name1.onblur = function() {
        if (!name1.value.includes('@')) { // not email
            // name1.classList.add('invalid');
            // error.innerHTML = 'Please enter a correct email.'
            document.getElementById("errUN").innerHTML = "Please enter a correct email.";
        }
    };
</script>

</html>